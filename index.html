<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Journey Timeline</title>
  <style>
    :root{
      --bg1:#071025; --bg2:#24102a; --accent:#ff6b6b; --accent2:#7afcff;
      --glass: rgba(255,255,255,0.04);
      --radius:18px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:var(--bg1);color:#e6eef8;transition:background 1200ms ease}
    .wrap{max-width:980px;margin:28px auto;padding:18px}
    header{display:flex;align-items:center;gap:16px}
    header h1{margin:0;font-size:20px}

    .timeline{position:relative;padding:40px 16px}
    svg.path{position:absolute;left:50%;transform:translateX(-50%);top:0;height:100%;width:6px;pointer-events:none}

    .events{display:flex;flex-direction:column-reverse;gap:28px}

    .event{display:grid;grid-template-columns:1fr 420px;gap:20px;align-items:center;position:relative}
    .event:nth-child(even){grid-template-columns:420px 1fr}

    .node{position:absolute;left:50%;transform:translateX(-50%);width:22px;height:22px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 6px 18px rgba(0,0,0,.6);z-index:5}

    .card{background:rgba(255,255,255,.04);border-radius:var(--radius);padding:14px;box-shadow:0 6px 26px rgba(10,14,24,.6);backdrop-filter:blur(6px)}
    .meta{font-size:13px;color:#bcd3ec;margin-bottom:8px}
    .title{font-size:16px;margin:0 0 8px 0}
    .caption{font-size:14px;color:#c7d7ee}

    .photo{width:420px;height:260px;border-radius:14px;overflow:hidden;position:relative;background:#091220;display:flex;align-items:center;justify-content:center;user-select:none}
    .slider{width:100%;height:100%;position:relative}
    .slide{position:absolute;inset:0;opacity:0;transition:opacity .6s ease;display:flex;align-items:center;justify-content:center}
    .slide.active{opacity:1}
    .slide canvas{width:100%;height:100%;display:block;object-fit:cover;border-radius:14px;background:transparent}

    .dots{position:absolute;left:50%;transform:translateX(-50%);bottom:8px;display:flex;gap:8px}
    .dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.25);cursor:pointer}
    .dot.active{background:linear-gradient(90deg,var(--accent),var(--accent2))}

    .group-strip{display:flex;gap:8px;margin-top:8px}
    .group-avatar{width:38px;height:38px;border-radius:10px;background-size:cover;background-position:center;border:2px solid rgba(255,255,255,.06)}

    @media(max-width:880px){
      .event{grid-template-columns:1fr}
      .event:nth-child(even){grid-template-columns:1fr}
      .photo{width:100%;height:220px}
    }

    canvas{user-select:none;pointer-events:none}
  </style>
</head>
<body oncontextmenu="return false;" ondragstart="return false;">

<div class="wrap">
  <header>
    <div style="width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700">JP</div>
    <div><h1>My Journey Timeline</h1></div>
  </header>

  <div class="timeline" id="timeline">
    <svg class="path" viewBox="0 0 6 1000" preserveAspectRatio="none">
      <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0%" stop-color="#ff6b6b"/><stop offset="100%" stop-color="#7afcff"/></linearGradient></defs>
      <rect x="0" y="0" width="6" height="100%" fill="url(#g1)" rx="3"/>
    </svg>
    <div class="events" id="events"></div>
  </div>
</div>

<script>
const slideDuration = 3000;
const watermarkText = "© Raviraj Journey";

/* EVENTS */
const events = [
  {
    date: '2023-03-09',
    title: 'Kashid Beach',
    caption: 'A sun-soaked day of waves, laughter, and unforgettable memories with the crew!',
    photos: [
      './images/IMG20240309114358.jpg',
      './images/IMG20240309120327.jpg',
      './images/IMG20240309182623.jpg',
      './images/Snapchat-1420790645.jpg',
      './images/IMG20240309122019.jpg'
      
    ],
    group: [],
    location: 'Kashid, Maharashtra'
  }
];

/* IMAGE TO CANVAS (NO MORE BLACK) */
function drawToCanvas(canvas, url) {
  return new Promise((resolve) => {
    const ctx = canvas.getContext("2d");
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.onload = () => {
      const cw = canvas.width, ch = canvas.height;
      const ir = img.width / img.height;
      const cr = cw / ch;
      let w, h;
      if (ir > cr) { h = ch; w = h * ir; }
      else { w = cw; h = w / ir; }
      const x = (cw - w) / 2;
      const y = (ch - h) / 2;
      ctx.drawImage(img, x, y, w, h);

      // watermark bottom-right
      ctx.font = "24px sans-serif";
      ctx.fillStyle = "rgba(255,255,255,0.75)";
      ctx.fillText(watermarkText, cw - ctx.measureText(watermarkText).width - 20, ch - 20);

      resolve();
    };
    img.onerror = () => {
      ctx.fillStyle = "#233";
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = "#fff";
      ctx.font = "20px sans-serif";
      ctx.fillText("Unable to load image",20,40);
      resolve();
    };
    img.src = url;
  });
}

/* SLIDER */
function initSlider(slider) {
  const slides = slider.querySelectorAll(".slide");
  const dots = slider.querySelectorAll(".dot");
  let i = 0;
  const go = (n) => {
    slides[i].classList.remove("active");
    dots[i].classList.remove("active");
    i = (n + slides.length) % slides.length;
    slides[i].classList.add("active");
    dots[i].classList.add("active");
  };
  setInterval(() => go(i + 1), slideDuration);
}

/* BUILD EVENTS */
function build() {
  const box = document.getElementById("events");
  box.innerHTML = "";
  events.forEach(e => {
    const wrap = document.createElement("div");
    wrap.className = "event";
    wrap.innerHTML = `
      <div class="card">
        <div class="meta">${e.date} • ${e.location}</div>
        <h3 class="title">${e.title}</h3>
        <div class="caption">${e.caption}</div>
      </div>
      <div class="photo"><div class="slider"></div></div>
    `;
    const slider = wrap.querySelector(".slider");

    e.photos.forEach((p, idx) => {
      const s = document.createElement("div");
      s.className = "slide" + (idx == 0 ? " active" : "");
      const canvas = document.createElement("canvas");
      canvas.width = 1200;
      canvas.height = 800;
      s.appendChild(canvas);
      drawToCanvas(canvas, p);
      slider.appendChild(s);
    });

    if (e.photos.length > 1) {
      const dots = document.createElement("div");
      dots.className = "dots";
      e.photos.forEach((_, id) => {
        const d = document.createElement("div");
        d.className = "dot" + (id == 0 ? " active" : "");
        dots.appendChild(d);
      });
      slider.appendChild(dots);
      initSlider(slider);
    }
    box.appendChild(wrap);
  });

  // nodes
  document.querySelectorAll(".node").forEach(n=>n.remove());
  document.querySelectorAll(".event").forEach(ev => {
    const n = document.createElement("div");
    n.className = "node";
    n.style.top = (ev.offsetTop + ev.offsetHeight/2 - 11) + "px";
    document.getElementById("timeline").appendChild(n);
  });
}

build();
</script>
</body>
</html>
